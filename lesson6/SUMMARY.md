# Lesson 6: LLMOps - RAG + Function Calling

–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–Ω—è—Ç–∏–µ –ø–æ —Ä–∞–±–æ—Ç–µ —Å –±–æ–ª—å—à–∏–º–∏ —è–∑—ã–∫–æ–≤—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏ (LLM) –≤ production.

## üéØ –¶–µ–ª—å –∑–∞–Ω—è—Ç–∏—è

–°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞–Ω–∏–º–∞—Ü–∏–π —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏—Ö –ø–æ–∑ —Å –ø–æ–º–æ—â—å—é:
- **LLM** –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **Function Calling** –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
- **RAG** –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## üìö –°—Ç—Ä—É–∫—Ç—É—Ä–∞

### Step 1: LLM Inference Service
**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: Ollama, Qwen2.5:1.5b, OpenAI API format

**–ß—Ç–æ –¥–µ–ª–∞–µ–º**:
- –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ LLM —Å–µ—Ä–≤–µ—Ä–∞ (Ollama)
- –°–æ–∑–¥–∞–Ω–∏–µ Python –∫–ª–∏–µ–Ω—Ç–∞
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π Jupyter notebook –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- ‚úÖ CPU-only (–±–µ–∑ GPU)
- ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- ‚úÖ GGUF quantized –º–æ–¥–µ–ª–∏
- ‚úÖ OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π API

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –†–∞–±–æ—Ç–∞—é—â–∏–π –ª–æ–∫–∞–ª—å–Ω—ã–π LLM —Å–µ—Ä–≤–∏—Å –Ω–∞ –ø–æ—Ä—Ç—É 11434

---

### Step 2: Function Calling
**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: FastAPI, Matplotlib, Function Calling

**–ß—Ç–æ –¥–µ–ª–∞–µ–º**:
- –°–æ–∑–¥–∞–µ–º Pose Visualization API (FastAPI)
- –£—á–∏–º LLM –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∞–Ω–∏–º–∞—Ü–∏–∏ –∏–∑ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–∑

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**:
```
User Query ‚Üí LLM Agent ‚Üí Function Call ‚Üí Pose API ‚Üí Images ‚Üí GIF
```

**API —ç–Ω–¥–ø–æ–∏–Ω—Ç**:
- `POST /visualize` - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç JSON —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

**–§–æ—Ä–º–∞—Ç –ø–æ–∑—ã**:
```json
{
  "Torso": [0, 0],
  "Head": [0, 60],
  "RH": [30, 35],    // Right Hand
  "LH": [-30, 35],   // Left Hand
  "RK": [15, -50],   // Right Knee
  "LK": [-15, -50]   // Left Knee
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ê–≥–µ–Ω—Ç —Å–æ–∑–¥–∞–µ—Ç GIF –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–º –∑–∞–ø—Ä–æ—Å–∞–º

---

### Step 3: RAG System
**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: TF-IDF, scikit-learn, RAG pattern

**–ü—Ä–æ–±–ª–µ–º–∞ Step 2**:
- LLM –ø–ª–æ—Ö–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–æ—á–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- –ù–µ—Ç –∑–Ω–∞–Ω–∏–π –æ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö –ø–æ–∑–∞—Ö
- –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–≥–ª—è–¥–∏—Ç –Ω–µ–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ

**–†–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ RAG**:
1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å 96 –æ–ø–∏—Å–∞–Ω–Ω—ã–º–∏ –ø–æ–∑–∞–º–∏
2. TF-IDF –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏–π
3. –ü–æ–∏—Å–∫ –ø–æ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–º—É —Å—Ö–æ–¥—Å—Ç–≤—É
4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –ø–æ–∑

**Workflow**:
```
Text Query ‚Üí LLM (–æ–ø–∏—Å–∞–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏–π) ‚Üí RAG Search ‚Üí Poses ‚Üí GIF
```

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** (`poses_database.json`):
- 96 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–æ–∑
- –û–ø–∏—Å–∞–Ω–∏—è —Ç–æ–ª—å–∫–æ –ø–æ–∑–∏—Ü–∏–π —Ç–µ–ª–∞ (–±–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏–π –¥–µ–π—Å—Ç–≤–∏–π)
- –ü—Ä–∏–º–µ—Ä—ã: "–†—É–∫–∏ –≤—ã—Ç—è–Ω—É—Ç—ã –≤–ø–µ—Ä–µ–¥", "–ü—Ä–∞–≤–∞—è —Ä—É–∫–∞ —Å–æ–≥–Ω—É—Ç–∞ –∫ –ø–ª–µ—á—É"

**–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è**:
- **–ú–∞–∫–∞—Ä–µ–Ω–∞** (16 –∫–∞–¥—Ä–æ–≤) - —Å–ª–æ–∂–Ω–∞—è —Ö–æ—Ä–µ–æ–≥—Ä–∞—Ñ–∏—è
- **–¢–∞–Ω–µ—Ü —Ä—É–∫** (8 –∫–∞–¥—Ä–æ–≤) - –ø—Ä–æ—Å—Ç—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:
- Similarity 1.00 –¥–ª—è —Ç–æ—á–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
- –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏
- –ó–∞—Ü–∏–∫–ª–µ–Ω–Ω—ã–µ GIF —Ñ–∞–π–ª—ã

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –ó–∞–ø—É—Å–∫ LLM
```bash
cd lesson6/seminar/step1_vllm_inference
make install
make start          # –ó–∞–ø—É—Å–∫ Ollama
make pull          # –°–∫–∞—á–∞—Ç—å –º–æ–¥–µ–ª—å qwen2.5:1.5b
make test          # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É
make notebook      # –û—Ç–∫—Ä—ã—Ç—å –¥–µ–º–æ
```

### –®–∞–≥ 2: Function Calling
```bash
cd lesson6/seminar/step2_function_calling
make install
make start-pose    # –ó–∞–ø—É—Å–∫ Pose API (–ø–æ—Ä—Ç 8001)
make start-ollama  # –ó–∞–ø—É—Å–∫ Ollama (–ø–æ—Ä—Ç 11434)
make test          # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
make notebook      # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –¥–µ–º–æ
```

### –®–∞–≥ 3: RAG
```bash
cd lesson6/seminar/step3_rag
make install
make demo          # –°–æ–∑–¥–∞—Ç—å –æ–±–∞ —Ç–∞–Ω—Ü–∞
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:
- `output/macarena.gif` (16 –∫–∞–¥—Ä–æ–≤, 32KB)
- `output/hand_dance.gif` (8 –∫–∞–¥—Ä–æ–≤, 19KB)

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

**Step 2 (–±–µ–∑ RAG)**:
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ
- –ü–æ–∑—ã –Ω–µ–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ
- –ù–µ—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –∫–∞–¥—Ä–∞–º–∏

**Step 3 (—Å RAG)**:
- ‚úÖ Similarity 0.90-1.00
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –ø–æ–∑—ã –∏–∑ –ë–î
- ‚úÖ –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã
- ‚úÖ –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä—ã

**–ú–∞–∫–∞—Ä–µ–Ω–∞** (16 —à–∞–≥–æ–≤):
1. –†—É–∫–∏ –≤–ø–µ—Ä–µ–¥ –ª–∞–¥–æ–Ω–∏ –≤–Ω–∏–∑/–≤–≤–µ—Ä—Ö
2. –†—É–∫–∏ –∫ –ø–ª–µ—á—É (–ø—Ä–∞–≤–∞—è/–ª–µ–≤–∞—è)
3. –†—É–∫–∏ –∑–∞ –≥–æ–ª–æ–≤—É
4. –†—É–∫–∏ –∫ –±–µ–¥—Ä–∞–º
5. –î–≤–∏–∂–µ–Ω–∏–µ –±–µ–¥—Ä–∞–º–∏
6. –†—É–∫–∏ –≤–≤–µ—Ä—Ö
7. –ü—Ä—ã–∂–æ–∫

**–¢–∞–Ω–µ—Ü —Ä—É–∫** (8 —à–∞–≥–æ–≤):
1. –†—É–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–ª–µ—á
2. –†—É–∫–∏ –≤–≤–µ—Ä—Ö
3. –ü—Ä–∞–≤–∞—è –≤–≤–µ—Ä—Ö, –ª–µ–≤–∞—è –≤–Ω–∏–∑
4. –õ–µ–≤–∞—è –≤–≤–µ—Ä—Ö, –ø—Ä–∞–≤–∞—è –≤–Ω–∏–∑
5. –†—É–∫–∏ –≤ —Å—Ç–æ—Ä–æ–Ω—ã
6. –†—É–∫–∏ –≤–ø–µ—Ä–µ–¥
7-8. –í–æ–∑–≤—Ä–∞—Ç –≤ –∏—Å—Ö–æ–¥–Ω—É—é

---

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è |
|-----------|------------|--------|
| LLM Runtime | Ollama | latest |
| Model | Qwen2.5 | 1.5b |
| API Format | OpenAI Compatible | v1 |
| Pose Service | FastAPI | 0.115+ |
| Visualization | Matplotlib | 3.9+ |
| RAG Search | scikit-learn (TF-IDF) | 1.5+ |
| Images | Pillow | 11.0+ |
| Orchestration | Docker Compose | - |
| Dependencies | Poetry | - |

---

## üéì –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### 1. Function Calling
–ü–æ–∑–≤–æ–ª—è–µ—Ç LLM –≤—ã–∑—ã–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:
```python
tools = [{
    "type": "function",
    "function": {
        "name": "create_animation",
        "description": "–°–æ–∑–¥–∞—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é –∏–∑ –ø–æ–∑",
        "parameters": {...}
    }
}]
```

### 2. RAG Pattern
–£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–µ –∑–Ω–∞–Ω–∏—è:
```
Query ‚Üí Retrieval (–ø–æ–∏—Å–∫ –≤ –ë–î) ‚Üí Augmentation (–æ–±–æ–≥–∞—â–µ–Ω–∏–µ) ‚Üí Generation
```

### 3. Semantic Search
TF-IDF –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ—Ö–æ–∂–∏—Ö –æ–ø–∏—Å–∞–Ω–∏–π:
```python
vectorizer = TfidfVectorizer()
similarities = cosine_similarity(query_vec, db_vecs)
```

---

## üìà –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

| –ú–µ—Ç—Ä–∏–∫–∞ | Step 2 (No RAG) | Step 3 (RAG) |
|---------|-----------------|--------------|
| –ö–∞—á–µ—Å—Ç–≤–æ –ø–æ–∑ | ‚ö†Ô∏è –°–ª—É—á–∞–π–Ω–æ–µ | ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–µ |
| –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç—å | ‚ùå –ù–∏–∑–∫–∞—è | ‚úÖ –í—ã—Å–æ–∫–∞—è |
| –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| Similarity | N/A | 0.90-1.00 |
| –°–ª–æ–∂–Ω–æ—Å—Ç—å | –ü—Ä–æ—Å—Ç–∞—è | –°—Ä–µ–¥–Ω—è—è |

---

## üéØ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏

–ü–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∑–∞–Ω—è—Ç–∏—è –≤—ã —É–º–µ–µ—Ç–µ:

1. ‚úÖ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ LLM (Ollama)
2. ‚úÖ –†–∞–±–æ—Ç–∞—Ç—å —Å OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º API
3. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å Function Calling
4. ‚úÖ –°–æ–∑–¥–∞–≤–∞—Ç—å FastAPI —Å–µ—Ä–≤–∏—Å—ã
5. ‚úÖ –ü—Ä–∏–º–µ–Ω—è—Ç—å RAG –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞
6. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TF-IDF –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
7. ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ
8. ‚úÖ –û—Ä–∫–µ—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã —á–µ—Ä–µ–∑ Docker Compose

---

## üí° –û–±–ª–∞—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

–ü–æ–¥–æ–±–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤:
- üéÆ –ò–≥—Ä–æ–≤–æ–π –∏–Ω–¥—É—Å—Ç—Ä–∏–∏ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–Ω–∏–º–∞—Ü–∏–π –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π)
- üèÉ –°–ø–æ—Ä—Ç–∏–≤–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–µ (–∞–Ω–∞–ª–∏–∑ –¥–≤–∏–∂–µ–Ω–∏–π)
- üè• –ú–µ–¥–∏—Ü–∏–Ω–µ (—Ñ–∏–∑–∏–æ—Ç–µ—Ä–∞–ø–∏—è, —Ä–µ–∞–±–∏–ª–∏—Ç–∞—Ü–∏—è)
- ü§ñ –†–æ–±–æ—Ç–æ—Ç–µ—Ö–Ω–∏–∫–µ (–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏–π)
- üé¨ –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–µ

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
lesson6/
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ SUMMARY.md                    # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ seminar/
    ‚îú‚îÄ‚îÄ step1_vllm_inference/
    ‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yml    # Ollama service
    ‚îÇ   ‚îú‚îÄ‚îÄ src/llm_client.py     # OpenAI client
    ‚îÇ   ‚îú‚îÄ‚îÄ notebooks/
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ chat_demo.ipynb   # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –¥–µ–º–æ
    ‚îÇ   ‚îî‚îÄ‚îÄ Makefile
    ‚îÇ
    ‚îú‚îÄ‚îÄ step2_function_calling/
    ‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yml    # Ollama + Pose API
    ‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile.pose       # Pose service image
    ‚îÇ   ‚îú‚îÄ‚îÄ src/
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pose_api.py       # FastAPI service
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pose_agent.py     # Function calling agent
    ‚îÇ   ‚îú‚îÄ‚îÄ notebooks/
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pose_demo.ipynb   # –î–µ–º–æ –∞–Ω–∏–º–∞—Ü–∏–π
    ‚îÇ   ‚îú‚îÄ‚îÄ test_scripts/         # –¢–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
    ‚îÇ   ‚îî‚îÄ‚îÄ Makefile
    ‚îÇ
    ‚îî‚îÄ‚îÄ step3_rag/
        ‚îú‚îÄ‚îÄ poses_database.json   # 96 –ø–æ–∑ —Å –æ–ø–∏—Å–∞–Ω–∏—è–º–∏
        ‚îú‚îÄ‚îÄ src/
        ‚îÇ   ‚îú‚îÄ‚îÄ pose_retriever.py # TF-IDF RAG
        ‚îÇ   ‚îî‚îÄ‚îÄ rag_agent.py      # RAG-based agent
        ‚îú‚îÄ‚îÄ demo_dance.py         # –ì–ª–∞–≤–Ω–æ–µ –¥–µ–º–æ
        ‚îú‚îÄ‚îÄ output/
        ‚îÇ   ‚îú‚îÄ‚îÄ macarena.gif      # 16 –∫–∞–¥—Ä–æ–≤, 32KB
        ‚îÇ   ‚îî‚îÄ‚îÄ hand_dance.gif    # 8 –∫–∞–¥—Ä–æ–≤, 19KB
        ‚îî‚îÄ‚îÄ Makefile
```

---

## üîß Troubleshooting

### LLM –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
```bash
curl http://localhost:11434/api/tags  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–¥–µ–ª–∏
ollama ps                              # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã
```

### Pose API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
curl http://localhost:8001/health     # Health check
docker-compose logs pose_api          # –õ–æ–≥–∏
```

### –ù–∏–∑–∫–∏–π similarity –≤ RAG
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏—è –≤ –ë–î
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏
- –î–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ –ø–æ–∑ –≤ –±–∞–∑—É

---

## üéâ –ò—Ç–æ–≥

**–°–æ–∑–¥–∞–ª–∏ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é LLMOps —Å–∏—Å—Ç–µ–º—É**:
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω—ã–π LLM inference
- ‚úÖ Function calling –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å API
- ‚úÖ RAG –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–Ω–∏–º–∞—Ü–∏–π –∏–∑ —Ç–µ–∫—Å—Ç–∞
- ‚úÖ –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–ü—Ä–∏–º–µ–Ω–∏–ª–∏ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ**:
- Ollama –¥–ª—è CPU-only inference
- OpenAI API format
- FastAPI –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤
- TF-IDF –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
- Docker Compose –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:
- 2 —Ç–∞–Ω—Ü–∞ —Å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∞–Ω–∏–º–∞—Ü–∏—è–º–∏
- Similarity 0.90+ –¥–ª—è –≤—Å–µ—Ö –∫–∞–¥—Ä–æ–≤
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ–±—ã—á–Ω–æ–º CPU –±–µ–∑ GPU

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

- [Ollama Documentation](https://ollama.ai/docs)
- [OpenAI Function Calling](https://platform.openai.com/docs/guides/function-calling)
- [RAG Pattern Overview](https://docs.anthropic.com/claude/docs/retrieval-augmented-generation)
- [FastAPI Best Practices](https://fastapi.tiangolo.com/tutorial/)

---

**Lesson 6 Complete! üéâüíÉü§ñ**
